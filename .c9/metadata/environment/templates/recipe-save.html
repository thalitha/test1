{"filter":false,"title":"recipe-save.html","tooltip":"/templates/recipe-save.html","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":167,"column":0},"action":"remove","lines":["{% extends \"layout.html\" %} {% block content %}","<div class=\"container-wrapper background-container d-flex justify-content-center\">","\t<div class=\"card\" style=\"width: 700px;\">","\t\t<br>","\t\t<h1 class=\"card-img-top text-center\">Upload Your Recipe</h1>","\t\t<div class=\"card-body\">","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputEmail1\">Recipe Name</label>","\t\t\t\t<input","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Name\"","\t\t\t\t\tname=\"name\"","\t\t\t\t\tvalue=\"{{ recipe['name'] if recipe else '' }}\"","\t\t\t\t/>","\t\t\t</div>","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Time (min)</label>","\t\t\t\t<input","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Time\"","\t\t\t\t\tname=\"time\"","\t\t\t\t\tvalue=\"{{ recipe['time'] if recipe else ''}}\"","\t\t\t\t/>","\t\t\t</div>","","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Ingredients List</label>","\t\t\t\t<textarea","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Ingredients\"","\t\t\t\t\tname=\"ingredients\"","\t\t\t\t>{{ recipe['ingredients'] if recipe else '' }}</textarea>","\t\t\t</div>","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Preparation Steps</label>","\t\t\t\t<textarea","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Preparation\"","\t\t\t\t\tname=\"preparation\">{{ recipe['preparation'] if recipe else '' }}</textarea>","\t\t\t</div>","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Category</label>","\t\t\t\t<select class=\"ddlCategories\"  multiple=\"multiple\"></select>","\t\t\t</div>","","\t\t\t{% if recipe %}","\t\t\t\t{% if recipe['image'] %}","\t\t\t\t<img src=\"{{ url_for('static', filename='images/'+(recipe['image'] if recipe['image'] else '')) }}\" class=\"card-img-top\"/>","\t\t\t\t{%endif%}","\t\t\t{%endif%}","\t\t\t","\t\t\t{{ dropzone.create(action='main.fileUpload') }}","","\t\t\t{{ dropzone.config() }}","\t\t\t{{","\t\t\t\tdropzone.style(","\t\t\t\t\t'border: 2px dashed #0087F7; margin: 10%; min-height: 100px;'","\t\t\t\t)","\t\t\t}}","\t\t\t","\t\t\t<div class=\"alert alert-success collapse\" role=\"alert\">","\t\t\t\tSaved Successfully","\t\t\t</div>","\t\t\t<button","\t\t\t\tid=\"save\"","\t\t\t\tclass=\"btn btn-outline-success right mt-3\"","\t\t\t\ttype=\"submit\"","\t\t\t>","\t\t\t\tSend","\t\t\t</button>","\t\t</div>","\t</div>","</div>","{% block scripts %}","<script type=\"text/javascript\">","\t$(document).ready(function() {","\t\t$('#save').bind('click', function() {","\t\t\t$.post(","\t\t\t\t'/recipe/save',","\t\t\t\t{","\t\t\t\t\tid: \"{{ recipe['_id'] if recipe else '' }}\",","\t\t\t\t\tname: $('input[name=\"name\"]').val(),","\t\t\t\t\ttime: $('input[name=\"time\"]').val(),","\t\t\t\t\tingredients: $('textarea[name=\"ingredients\"]').val(),","\t\t\t\t\tpreparation: $('textarea[name=\"preparation\"]').val(),","\t\t\t\t\tcategories: $('.ddlCategories').select2('data').map(m => m.text),","\t\t\t\t},","\t\t\t\tfunction(data) {","\t\t\t\t\tif (data.success) $('.alert-success').fadeIn();","","\t\t\t\t\t$('#result').text(data.success);","\t\t\t\t}","\t\t\t);","","\t\t\treturn false;","\t\t});","","\t\t$('.ddlCategories').select2({","\t\t\twidth: '655px',","\t\t\tplaceholder: 'Select multiple categories which your recipe belongs',","\t\t\t//templateResult: formatState,","\t\t\tajax: {","\t\t\t\turl: '/categories/GetAll',","\t\t\t\tdataType: 'json',","\t\t\t\tprocessResults: function(data) {","\t\t\t\t\treturn {","\t\t\t\t\t\tresults: data,","\t\t\t\t\t};","\t\t\t\t},","\t\t\t},","\t\t});","\t\t","\t\t","\t\t selectEditValue();","\t});","","\tfunction formatState(state) {","\t\tif (!state.id) {","\t\t\treturn state.text;","\t\t}","","\t\t$.post('/categories/getAll', function(data) {","\t\t\tvar $state = $('<span>' + data.name + '</span>');","","\t\t\treturn $state;","\t\t});","\t}","\t","\tfunction selectEditValue() {","\t\tvar isNew = '{{ false if recipe else true }}';","\t\t","\t\tif (isNew == 'True')","\t\t\treturn;","\t\t\t","\t\tvar selected = \"{%if recipe: %}{%for category in recipe['categories']%}{{category}},{%endfor%}{%endif%}\".split(',');","","\t\tselected.pop();","\t\t","\t\tselected.forEach(c => {","\t\t\tvar data = {","\t\t\t    id: c,","\t\t\t    text: c","\t\t\t};","\t\t\t","\t\t\tvar newOption = new Option(data.text, data.id, false, true);","\t\t\t$('.ddlCategories').append(newOption).trigger('change');","\t\t\t","\t\t})","\t\t","\t}","</script>","{% endblock %} {% block styles %}","","<style>","\t.ddlCategories {","\t\twidth: 200px;","\t}","","\t.dropzone {","\t\tborder: 1px dashed gray;","\t}","</style>","{% endblock %} {% endblock %}",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":167,"column":0},"action":"insert","lines":["{% extends \"layout.html\" %} {% block content %}","<div class=\"container-wrapper background-container d-flex justify-content-center\">","\t<div class=\"card\" style=\"width: 700px;\">","\t\t<br>","\t\t<h1 class=\"card-img-top text-center\">Upload Your Recipe</h1>","\t\t<div class=\"card-body\">","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputEmail1\">Recipe Name</label>","\t\t\t\t<input","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Name\"","\t\t\t\t\tname=\"name\"","\t\t\t\t\tvalue=\"{{ recipe['name'] if recipe else '' }}\"","\t\t\t\t/>","\t\t\t</div>","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Time (min)</label>","\t\t\t\t<input","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Time\"","\t\t\t\t\tname=\"time\"","\t\t\t\t\tvalue=\"{{ recipe['time'] if recipe else ''}}\"","\t\t\t\t/>","\t\t\t</div>","","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Ingredients List</label>","\t\t\t\t<textarea","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Ingredients\"","\t\t\t\t\tname=\"ingredients\"","\t\t\t\t>{{ recipe['ingredients'] if recipe else '' }}</textarea>","\t\t\t</div>","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Preparation Steps</label>","\t\t\t\t<textarea","\t\t\t\t\ttype=\"text\"","\t\t\t\t\tclass=\"form-control\"","\t\t\t\t\tplaceholder=\"Preparation\"","\t\t\t\t\tname=\"preparation\">{{ recipe['preparation'] if recipe else '' }}</textarea>","\t\t\t</div>","\t\t\t<div class=\"form-group\">","\t\t\t\t<label for=\"exampleInputPassword1\">Category</label>","\t\t\t\t<select class=\"ddlCategories\"  multiple=\"multiple\"></select>","\t\t\t</div>","","\t\t\t{% if recipe %}","\t\t\t\t{% if recipe['image'] %}","\t\t\t\t<img src=\"{{ url_for('static', filename='images/'+(recipe['image'] if recipe['image'] else '')) }}\" class=\"card-img-top\"/>","\t\t\t\t{%endif%}","\t\t\t{%endif%}","\t\t\t","\t\t\t{{ dropzone.create(action='main.fileUpload') }}","","\t\t\t{{ dropzone.config() }}","\t\t\t{{","\t\t\t\tdropzone.style(","\t\t\t\t\t'border: 2px dashed #0087F7; margin: 10%; min-height: 100px;'","\t\t\t\t)","\t\t\t}}","\t\t\t","\t\t\t<div class=\"alert alert-success collapse\" role=\"alert\">","\t\t\t\tSaved Successfully","\t\t\t</div>","\t\t\t<button","\t\t\t\tid=\"save\"","\t\t\t\tclass=\"btn btn-outline-success right mt-3\"","\t\t\t\ttype=\"submit\"","\t\t\t>","\t\t\t\tSend","\t\t\t</button>","\t\t</div>","\t</div>","</div>","{% block scripts %}","<script type=\"text/javascript\">","\t$(document).ready(function() {","\t\t$('#save').bind('click', function() {","\t\t\t$.post(","\t\t\t\t'/recipe/save',","\t\t\t\t{","\t\t\t\t\tid: \"{{ recipe['_id'] if recipe else '' }}\",","\t\t\t\t\tname: $('input[name=\"name\"]').val(),","\t\t\t\t\ttime: $('input[name=\"time\"]').val(),","\t\t\t\t\tingredients: $('textarea[name=\"ingredients\"]').val(),","\t\t\t\t\tpreparation: $('textarea[name=\"preparation\"]').val(),","\t\t\t\t\tcategories: $('.ddlCategories').select2('data').map(m => m.text),","\t\t\t\t},","\t\t\t\tfunction(data) {","\t\t\t\t\tif (data.success) $('.alert-success').fadeIn();","","\t\t\t\t\t$('#result').text(data.success);","\t\t\t\t}","\t\t\t);","","\t\t\treturn false;","\t\t});","","\t\t$('.ddlCategories').select2({","\t\t\twidth: '655px',","\t\t\tplaceholder: 'Select multiple categories which your recipe belongs',","\t\t\t//templateResult: formatState,","\t\t\tajax: {","\t\t\t\turl: '/categories/GetAll',","\t\t\t\tdataType: 'json',","\t\t\t\tprocessResults: function(data) {","\t\t\t\t\treturn {","\t\t\t\t\t\tresults: data,","\t\t\t\t\t};","\t\t\t\t},","\t\t\t},","\t\t});","\t\t","\t\t","\t\t selectEditValue();","\t});","","\tfunction formatState(state) {","\t\tif (!state.id) {","\t\t\treturn state.text;","\t\t}","","\t\t$.post('/categories/getAll', function(data) {","\t\t\tvar $state = $('<span>' + data.name + '</span>');","","\t\t\treturn $state;","\t\t});","\t}","\t","\tfunction selectEditValue() {","\t\tvar isNew = '{{ false if recipe else true }}';","\t\t","\t\tif (isNew == 'True')","\t\t\treturn;","\t\t\t","\t\tvar selected = \"{%if recipe: %}{%for category in recipe['categories']%}{{category}},{%endfor%}{%endif%}\".split(',');","","\t\tselected.pop();","\t\t","\t\tselected.forEach(c => {","\t\t\tvar data = {","\t\t\t    id: c,","\t\t\t    text: c","\t\t\t};","\t\t\t","\t\t\tvar newOption = new Option(data.text, data.id, false, true);","\t\t\t$('.ddlCategories').append(newOption).trigger('change');","\t\t\t","\t\t})","\t\t","\t}","</script>","{% endblock %} {% block styles %}","","<style>","\t.ddlCategories {","\t\twidth: 200px;","\t}","","\t.dropzone {","\t\tborder: 1px dashed gray;","\t}","</style>","{% endblock %} {% endblock %}",""],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":45,"column":52},"end":{"row":45,"column":52},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1569967465486,"hash":"75e7e6e373ab9b6c21add006bd05ac00473c426e"}